#!/usr/bin/env bash

process-indexed() {
    local arguments=("$@")
    echo "found: ${#arguments[@]} arguments"

    local IFS=,
    echo "${arguments[*]}"
}

process-associative() {
    local arguments=("$@")
    echo "found: ${#arguments[@]} arguments"

    declare -A unique
    local item
    for item in "${arguments[@]}";do
        unique[$item]=1
    done

    echo "found: ${#unique[@]} unique arguments"
}

process-commands() {
    local arguments=("$@")
    echo "found: ${#arguments[@]} arguments"

    local item
    for item; do
        echo "running command \"$item\""
        "$item"
    done
}


cmd=$1
echo "script called with arguments: $*"
shift
echo "script shifted to arguments: $*"

case "$cmd" in
    indexed)
        process-indexed "$@"
        ;;
    associative)
        process-associative "$@"
        ;;
    command)
        process-commands "$@"
        ;;
    *)
        echo "unkown cmd: $cmd" >&2
        exit 1
        ;;
esac
